webpackJsonp([1],{"+rxS":function(t,e){},"/6Vk":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{root:"guestable",pagination:{sortBy:"nom",rowsPerPage:25},headers:[{text:"Nom",align:"center",sortable:!0,value:"nom"},{text:"Prénom",align:"center",sortable:!0,value:"prenom"},{text:"Adultes",align:"center",sortable:!1,value:"adulte"},{text:"Enfants",align:"center",sortable:!1,value:"enfant"},{text:"Famille",align:"center",sortable:!0,value:"famille"},{text:"Côté",align:"center",sortable:!0,value:"cote"},{text:"Vin d'honneur",align:"center",sortable:!0,value:"vindhonneur"},{text:"Repas",align:"center",sortable:!0,value:"repas"},{text:"Commentaires",align:"center",sortable:!1,value:"commentaire"}],guestData:this.$store.state.guests.guests}},computed:{numberOfAdults:function(){if(this.$store.state.guests.guests)return this.$store.state.guests.guests.map(function(t){return t.adulte}).reduce(function(t,e){return t+e},0)},numberOfChildren:function(){if(this.$store.state.guests.guests)return this.$store.state.guests.guests.map(function(t){return t.enfant}).reduce(function(t,e){return t+e},0)},numberOfGuests:function(){return this.numberOfAdults+this.numberOfChildren},numberForCocktail:function(){if(this.$store.state.guests.guests)return this.$store.state.guests.guests.filter(function(t){return t.vindhonneur}).map(function(t){return t.adulte+t.enfant}).reduce(function(t,e){return t+e},0)},numberForMeal:function(){if(this.$store.state.guests.guests)return this.$store.state.guests.guests.filter(function(t){return t.repas}).map(function(t){return t.adulte+t.enfant}).reduce(function(t,e){return t+e},0)}},methods:{getFullNameFromLien:function(t){return this.$store.state.guests.guests.filter(function(e){return e.id===t}).map(function(t){return t.prenom+" "+t.nom.toUpperCase()})[0]},autosave:function(t,e,n){var r={id:t};console.log(e+r),r[e]=n,this.$store.dispatch("updateGuest",r)}},mounted:function(){this.$store.dispatch("getGuests")}}},B5a1:function(t,e,n){var r=n("VU/8")(n("Z2mt"),n("jWqT"),null,null);t.exports=r.exports},"Du/2":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return a});var r="GET_COUNT",s="INC_COUNT",o="GET_GUESTS",a="UPDATE_GUEST"},EWfp:function(t,e,n){n("oBAx");var r=n("VU/8")(n("EZYi"),n("QDfl"),null,null);t.exports=r.exports},EZYi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{drawer:!0}},computed:{isDense:function(){return this.offsetTop>50}},methods:{},props:{source:String}}},Fwjn:function(t,e,n){n("ITRA");var r=n("VU/8")(n("ig/E"),n("MTBB"),"data-v-3d0aca60",null);t.exports=r.exports},ITRA:function(t,e){},IcnI:function(t,e,n){"use strict";var r=n("7+uW"),s=n("NYxO"),o=n("ukYY"),a=n("mUbh");r.a.use(s.a);var i={counts:{count:-1},guests:{}};e.a=new s.a.Store({state:i,mutations:o.a,actions:a})},MTBB:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-layout",{attrs:{column:"",wrap:"","justify-space-between":""}},[n("v-flex",{attrs:{"mt-3":"","pl-1":"","pr-1":""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",[n("v-icon",{class:t.color+"--text text--lighten-3 icon--xxl-large"},[t._v(t._s(t.icon))])],1),t._v(" "),n("v-flex",{staticClass:"number"},[n("div",{class:t.color+"--text text-xs-center"},[n("strong",{staticClass:"number"},[t._v(t._s(t.number))])])])],1)],1),t._v(" "),n("v-flex",[n("div",{class:t.color+"--text text-xs-center headline"},[t._v(t._s(t.text))])])],1)],1)},staticRenderFns:[]}},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),s=n("/ocq"),o=n("3EgV"),a=n.n(o),i=n("EWfp"),u=n.n(i),c=n("B5a1"),l=n.n(c),d=n("rmNe"),v=n.n(d),f=n("Fwjn"),m=n.n(f),p=n("IcnI"),g=n("KLw7"),_=n.n(g);r.a.use(s.a),r.a.use(a.a),r.a.use(_.a),r.a.component("guest-indicator-card",m.a);var h=new s.a({mode:"history",routes:[{path:"/counter",component:l.a,meta:{title:"Counter"}},{path:"/guests",component:v.a,meta:{title:"Liste des invités"}}]});h.beforeEach(function(t,e,n){document.title="WP - "+t.meta.title,n()}),new r.a({el:"#app",router:h,store:p.a,render:function(t){return t(u.a)}})},QDfl:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"inspire"}},[n("v-navigation-drawer",{staticClass:"deep-orange--text",attrs:{persistent:"","enable-resize-watcher":"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},[n("v-list-tile",{attrs:{to:{path:"/counter"}}},[n("v-list-tile-action",[n("v-icon",[t._v("home")])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v("Home")])],1)],1),t._v(" "),n("v-list-tile",{attrs:{to:{path:"/guests"}}},[n("v-list-tile-action",[n("v-icon",[t._v("contact_mail")])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v("Invités")])],1)],1)],1)],1),t._v(" "),n("v-toolbar",{attrs:{color:"red",dark:"",fixed:"",app:"",dense:t.isDense}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),n("v-toolbar-title",[t._v(t._s(t.$route.meta.title))])],1),t._v(" "),n("main",[n("v-content",{attrs:{id:"content"}},[n("v-container",{attrs:{fluid:"","fill-height":""}},[n("v-fade-transition",{attrs:{mode:"out-in"}},[n("router-view")],1)],1)],1)],1),t._v(" "),n("v-footer",{attrs:{color:"red",app:""}},[n("span",{staticClass:"white--text"},[t._v("EDG © 2017")])])],1)},staticRenderFns:[]}},Z2mt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={methods:{incCount:function(){this.$store.dispatch("incCount",this.$store.state.counts.count.count)}},mounted:function(){this.$store.dispatch("getCount")}}},"ig/E":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{number:Number,text:String,icon:String,color:String}}},jWqT:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("Dashboard")]),t._v(" "),n("h4",[t._v("Count: "+t._s(this.$store.state.counts.count.count))]),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.incCount()}}},[t._v("Increment Count")])])},staticRenderFns:[]}},mUbh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"getCount",function(){return a}),n.d(e,"incCount",function(){return i}),n.d(e,"getGuests",function(){return u}),n.d(e,"updateGuest",function(){return c});var r=n("mvHQ"),s=n.n(r),o=n("Du/2"),a=function(t){var e=t.commit;fetch("/api/count",{method:"GET"}).then(function(t){return t.json()}).then(function(t){return e(o.a,t)})},i=function(t,e){var n=t.commit;fetch("/api/count",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:s()({count:++e})}).then(function(t){return t.json()}).then(function(t){return n(o.b,t)})},u=function(t){var e=t.commit;fetch("/api/guest/all",{method:"GET"}).then(function(t){return t.json()}).then(function(t){return e(o.c,t)})},c=function(t,e){t.commit;e.lastUpdate=new Date,fetch("/api/guest/autosave",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:s()(e)})}},oBAx:function(t,e){},pZjm:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{"mb-5":"","mt-3":""}},[n("v-layout",{attrs:{row:"",wrap:"","justify-space-around":""}},[n("v-flex",{attrs:{xs12:"",md2:"","align-center":""}},[n("guest-indicator-card",{attrs:{number:t.numberOfGuests,text:"Total",icon:"people",color:"green"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md2:"","align-center":""}},[n("guest-indicator-card",{attrs:{number:t.numberOfAdults,text:"Adultes",icon:"person",color:"light-blue"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md2:"","align-center":""}},[n("guest-indicator-card",{attrs:{number:t.numberOfChildren,text:"Enfants",icon:"child_friendly",color:"pink"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md2:"","align-center":""}},[n("guest-indicator-card",{attrs:{number:t.numberForCocktail,text:"Vin d'honneur",icon:"local_bar",color:"purple"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md2:"","align-center":""}},[n("guest-indicator-card",{attrs:{number:t.numberForMeal,text:"Repas",icon:"restaurant",color:"teal"}})],1)],1)],1),t._v(" "),n("v-flex",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.guestData,pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[n("tr",[n("td",{staticClass:"text-xs-center"},[e.item.lien.length>0?n("v-tooltip",{attrs:{right:""}},[n("div",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.item.nom.toUpperCase()))]),t._v(" "),n("span",[t._v(t._s(t.getFullNameFromLien(e.item.lien)))])]):n("span",[t._v("\n                "+t._s(e.item.nom.toUpperCase())+"\n              ")])],1),t._v(" "),n("td",{staticClass:"text-xs-center"},[e.item.lien.length>0?n("v-tooltip",{attrs:{right:""}},[n("div",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.item.prenom))]),t._v(" "),n("span",[t._v(t._s(t.getFullNameFromLien(e.item.lien)))])]):n("span",[t._v("\n                "+t._s(e.item.prenom)+"\n              ")])],1),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.adulte))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.enfant))]),t._v(" "),n("td",{staticClass:"text-xs-center"},[n("v-checkbox",{attrs:{color:"blue-grey"},on:{change:function(n){t.autosave(e.item._id,"famille",n)}},model:{value:e.item.famille,callback:function(n){t.$set(e.item,"famille",n)},expression:"props.item.famille"}})],1),t._v(" "),n("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.cote))]),t._v(" "),n("td",{staticClass:"text-xs-center"},[n("v-checkbox",{attrs:{color:"blue-grey"},model:{value:e.item.vindhonneur,callback:function(n){t.$set(e.item,"vindhonneur",n)},expression:"props.item.vindhonneur"}})],1),t._v(" "),n("td",{staticClass:"text-xs-right"},[n("v-checkbox",{attrs:{color:"blue-grey"},model:{value:e.item.repas,callback:function(n){t.$set(e.item,"repas",n)},expression:"props.item.repas"}})],1),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.commentaire))])])]}}])})],1),t._v(" "),n("v-btn",{attrs:{fixed:"",dark:"",fab:"",bottom:"",right:"",color:"green"}},[n("v-icon",[t._v("add")])],1)],1)},staticRenderFns:[]}},rmNe:function(t,e,n){n("+rxS");var r=n("VU/8")(n("/6Vk"),n("pZjm"),"data-v-74eb461d",null);t.exports=r.exports},ukYY:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r,s=n("bOdI"),o=n.n(s),a=n("Du/2"),i=(r={},o()(r,a.a,function(t,e){t.counts=e}),o()(r,a.b,function(t,e){t.counts.count=e}),o()(r,a.c,function(t,e){t.guests=e}),o()(r,a.d,function(t,e){t.guests=e}),r)}},["NHnr"]);
//# sourceMappingURL=app.593da00902bd25e426e0.js.map